---
import { BackgroundImage } from "astro-imagetools/components";

interface Props {
   src?: string;
   noise?: boolean;
   className?: string;
}

const {
   src = "/assets/backgrounds/bg-home.jpeg",
   noise,
   className,
} = Astro.props;
---

<BackgroundImage
   src={src}
   tag="div"
   preload="webp"
   backgroundSize="cover"
   breakpoints={[400, 800, 1400]}
   quality={100}
   position="top"
   attributes={{
      container: { class: className },
   }}
>
   {noise && <div class="noise" />}
   <slot />
</BackgroundImage>

<style>
   .noise {
      position: absolute;
      inset: 0;
      isolation: isolate;
      background: url("/assets/backgrounds/noise.png") top center/220px repeat;
      background-blend-mode: overlay;
      opacity: 0.4;
   }
</style>
